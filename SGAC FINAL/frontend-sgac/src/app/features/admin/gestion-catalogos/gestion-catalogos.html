<div class="catalogos-container">
  <h2>Gestión de Catálogos</h2>

  <div class="tabs">
    <button [class.active]="tabActiva() === 'facultades'" (click)="setTab('facultades')">Facultades</button>
    <button [class.active]="tabActiva() === 'carreras'" (click)="setTab('carreras')">Carreras</button>
    <button [class.active]="tabActiva() === 'asignaturas'" (click)="setTab('asignaturas')">Asignaturas</button>
    <button [class.active]="tabActiva() === 'periodos'" (click)="setTab('periodos')">Períodos</button>
  </div>

  @if (tabActiva() === 'facultades') {
    <section class="card">
      <h3>Facultades</h3>
      <div class="form-inline">
        <input [(ngModel)]="nuevaFacultad" placeholder="Nueva facultad" />
        <button (click)="crearFacultad()">Crear</button>
      </div>
      <table>
        <tr><th>ID</th><th>Nombre</th><th>Acciones</th></tr>
        @for (f of facultades; track f.idFacultad) {
          <tr>
            <td>{{ f.idFacultad }}</td><td>{{ f.nombreFacultad }}</td>
            <td>
              <button (click)="editarFacultad(f)">Editar</button>
              <button class="danger" (click)="desactivarFacultad(f)">Desactivar</button>
            </td>
          </tr>
        }
      </table>
    </section>
  }

  @if (tabActiva() === 'carreras') {
    <section class="card">
      <h3>Carreras</h3>
      <div class="form-inline">
        <select [(ngModel)]="nuevaCarrera.idFacultad">
          <option [ngValue]="0">Facultad</option>
          @for (f of facultades; track f.idFacultad) {
            <option [ngValue]="f.idFacultad">{{ f.nombreFacultad }}</option>
          }
        </select>
        <input [(ngModel)]="nuevaCarrera.nombreCarrera" placeholder="Nueva carrera" />
        <button (click)="crearCarrera()">Crear</button>
      </div>
      <table>
        <tr><th>ID</th><th>Facultad</th><th>Carrera</th><th>Acciones</th></tr>
        @for (c of carreras; track c.idCarrera) {
          <tr>
            <td>{{ c.idCarrera }}</td><td>{{ c.nombreFacultad }}</td><td>{{ c.nombreCarrera }}</td>
            <td>
              <button (click)="editarCarrera(c)">Editar</button>
              <button class="danger" (click)="desactivarCarrera(c)">Desactivar</button>
            </td>
          </tr>
        }
      </table>
    </section>
  }

  @if (tabActiva() === 'asignaturas') {
    <section class="card">
      <h3>Asignaturas</h3>
      <div class="form-inline">
        <select [(ngModel)]="nuevaAsignatura.idCarrera">
          <option [ngValue]="0">Carrera</option>
          @for (c of carreras; track c.idCarrera) {
            <option [ngValue]="c.idCarrera">{{ c.nombreCarrera }}</option>
          }
        </select>
        <input [(ngModel)]="nuevaAsignatura.nombreAsignatura" placeholder="Nueva asignatura" />
        <input type="number" min="1" [(ngModel)]="nuevaAsignatura.semestre" placeholder="Semestre" />
        <button (click)="crearAsignatura()">Crear</button>
      </div>
      <table>
        <tr><th>ID</th><th>Carrera</th><th>Asignatura</th><th>Semestre</th><th>Acciones</th></tr>
        @for (a of asignaturas; track a.idAsignatura) {
          <tr>
            <td>{{ a.idAsignatura }}</td><td>{{ a.nombreCarrera }}</td><td>{{ a.nombreAsignatura }}</td><td>{{ a.semestre }}</td>
            <td>
              <button (click)="editarAsignatura(a)">Editar</button>
              <button class="danger" (click)="desactivarAsignatura(a)">Desactivar</button>
            </td>
          </tr>
        }
      </table>
    </section>
  }

  @if (tabActiva() === 'periodos') {
    <section class="card">
      <h3>Períodos Académicos</h3>
      <div class="form-inline">
        <input [(ngModel)]="nuevoPeriodo.nombrePeriodo" placeholder="Nombre período" />
        <input type="date" [(ngModel)]="nuevoPeriodo.fechaInicio" />
        <input type="date" [(ngModel)]="nuevoPeriodo.fechaFin" />
        <select [(ngModel)]="nuevoPeriodo.estado">
          <option value="ACTIVO">ACTIVO</option>
          <option value="INACTIVO">INACTIVO</option>
        </select>
        <button (click)="crearPeriodo()">Crear</button>
      </div>
      <table>
        <tr><th>ID</th><th>Período</th><th>Inicio</th><th>Fin</th><th>Estado</th><th>Acciones</th></tr>
        @for (p of periodos; track p.idPeriodoAcademico) {
          <tr>
            <td>{{ p.idPeriodoAcademico }}</td>
            <td>{{ p.nombrePeriodo }}</td>
            <td>{{ p.fechaInicio }}</td>
            <td>{{ p.fechaFin }}</td>
            <td>{{ p.estado }}</td>
            <td>
              <button (click)="editarPeriodo(p)">Editar</button>
              <button class="danger" (click)="desactivarPeriodo(p)">Desactivar</button>
            </td>
          </tr>
        }
      </table>
    </section>
  }
</div>
