<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in"
     (click)="onClose()">
  <div class="bg-white rounded-xl w-full max-w-2xl shadow-2xl flex flex-col max-h-[90vh] animate-slide-in"
       (click)="$event.stopPropagation()">

    <div class="flex items-start justify-between border-b p-6">
      <div class="flex-1">
        <div class="flex items-start justify-between">
          <div>
            <h2 class="text-xl font-bold text-gray-900">{{ convocatoria.nombreAsignatura }}</h2>
            <p class="text-sm text-gray-500 mt-1">{{ convocatoria.nombrePeriodo }}</p>
          </div>
          <span [class]="'px-3 py-1 text-sm font-medium rounded-md border ml-4 ' + getStatusColor()">
                        {{ convocatoria.estado }}
                    </span>
        </div>
      </div>
      <button (click)="onClose()" class="p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors ml-2">
        <lucide-icon [img]="X" [size]="20"></lucide-icon>
      </button>
    </div>

    <div class="p-6 overflow-y-auto space-y-6">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
          <div class="p-2 bg-primary/10 rounded-lg">
            <lucide-icon [img]="Users" [size]="20" class="text-primary"></lucide-icon>
          </div>
          <div>
            <p class="text-sm font-medium text-gray-500">Cupos Disponibles</p>
            <p class="text-lg font-bold text-gray-900">{{ convocatoria.cuposDisponibles }}</p>
          </div>
        </div>

        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
          <div class="p-2 bg-primary/10 rounded-lg">
            <lucide-icon [img]="Calendar" [size]="20" class="text-primary"></lucide-icon>
          </div>
          <div>
            <p class="text-sm font-medium text-gray-500">Fecha de Publicación</p>
            <p class="text-lg font-bold text-gray-900">{{ convocatoria.fechaPublicacion | date: 'dd/MM/yyyy'
              }}</p>
          </div>
        </div>

        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
          <div class="p-2 bg-primary/10 rounded-lg">
            <lucide-icon [img]="Clock" [size]="20" class="text-primary"></lucide-icon>
          </div>
          <div>
            <p class="text-sm font-medium text-gray-500">Fecha de Cierre</p>
            <p class="text-lg font-bold text-gray-900">{{ convocatoria.fechaCierre | date: 'dd/MM/yyyy' }}
            </p>
          </div>
        </div>

        <div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg">
          <div class="p-2 bg-primary/10 rounded-lg">
            <lucide-icon [img]="FileText" [size]="20" class="text-primary"></lucide-icon>
          </div>
          <div>
            <p class="text-sm font-medium text-gray-500">Período Académico</p>
            <p class="text-lg font-bold text-gray-900">{{ convocatoria.nombrePeriodo }}</p>
          </div>
        </div>

      </div>

      <div class="border-t pt-6">
        <h3 class="font-semibold text-gray-900 mb-3">Información Adicional</h3>
        <div class="space-y-2 text-sm text-gray-600">
          <p><span class="font-medium">Asignatura:</span> {{ convocatoria.nombreAsignatura }}</p>
          <p><span class="font-medium">Estado:</span> {{ convocatoria.estado }}</p>
          <p><span class="font-medium">Activo:</span> {{ convocatoria.activo ? 'Sí' : 'No' }}</p>
        </div>
      </div>

    </div>

    <div class="border-t p-6 bg-gray-50 flex justify-end gap-3 rounded-b-xl">
      <button *ngIf="isStaff" (click)="onVerifyPostulantes()"
              class="px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-sm transition-colors">
        Ver Postulantes
      </button>
      <button (click)="onClose()"
              class="px-4 py-2 text-sm font-medium border rounded-lg hover:bg-gray-100 text-gray-700 transition-colors">
        Cerrar
      </button>

      @if (isStudent && convocatoria.estado === 'ABIERTA') {
        @if (isApplied) {
          <button (click)="onVerEstado()"
                  class="px-6 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 flex items-center gap-2 shadow-sm transition-colors">
            Ver Estado
          </button>
        } @else {
          <button (click)="onPostular()"
                  class="px-6 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-primary/90 flex items-center gap-2 shadow-sm transition-colors">
            Postular
          </button>
        }
      }
    </div>

  </div>
</div>
