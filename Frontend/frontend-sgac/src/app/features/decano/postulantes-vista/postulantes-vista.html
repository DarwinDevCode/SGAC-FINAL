<div class="gestion-container max-w-6xl mx-auto">
    <div class="section-header">
        <div class="title-container">
            <div class="flex items-center gap-4">
                <a routerLink="/decano/convocatorias"
                    class="back-link inline-flex items-center justify-center w-10 h-10 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 transition-colors"
                    title="Volver a convocatorias">
                    <lucide-icon name="arrow-left" size="20"></lucide-icon>
                </a>
                <h2 class="title m-0">Supervisión de Postulantes</h2>
            </div>
            <p class="subtitle mt-3 ml-14">Convocatoria #{{ idConvocatoria }}</p>
        </div>
    </div>

    <div class="content-wrapper">
        @if (loading) {
        <div class="info-message">
            <lucide-icon name="loader-2" class="animate-spin mx-auto mb-2" size="32"></lucide-icon>
            Cargando lista de postulantes...
        </div>
        } @else if (errorMensaje) {
        <div class="error-state">
            <lucide-icon name="alert-triangle" size="48" class="error-icon text-amber-500"></lucide-icon>
            <p class="text-amber-700 font-medium mt-4">{{ errorMensaje }}</p>
        </div>
        } @else {

        <div class="bg-white rounded-[var(--radius)] border border-slate-200 shadow-sm overflow-hidden mb-6">
            <div class="table-container p-0 overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr
                            class="bg-slate-50 border-b border-slate-200 text-slate-500 text-sm uppercase tracking-wider">
                            <th class="py-4 px-6 font-semibold">Postulante</th>
                            <th class="py-4 px-6 font-semibold">Matrícula</th>
                            <th class="py-4 px-6 font-semibold">Fecha de Aplicación</th>
                            <th class="py-4 px-6 font-semibold">Estado Actual</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        @for (post of postulantes; track post.idPostulacion) {
                        <tr class="hover:bg-slate-50 transition-colors">
                            <td class="py-4 px-6">
                                <div class="flex items-center gap-3">
                                    <div
                                        class="w-10 h-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-bold">
                                        {{ post.nombreCompletoEstudiante.charAt(0) }}
                                    </div>
                                    <span class="font-medium text-slate-800">{{ post.nombreCompletoEstudiante }}</span>
                                </div>
                            </td>
                            <td class="py-4 px-6 text-slate-600 font-mono text-sm">
                                {{ post.matriculaEstudiante }}
                            </td>
                            <td class="py-4 px-6 text-slate-600">
                                <div class="flex items-center gap-2">
                                    <lucide-icon name="calendar" size="16" class="text-slate-400"></lucide-icon>
                                    {{ post.fechaPostulacion }}
                                </div>
                            </td>
                            <td class="py-4 px-6">
                                <span class="px-3 py-1 text-xs font-semibold rounded-full" [ngClass]="{
                            'bg-yellow-100 text-yellow-800 border border-yellow-200': post.estadoPostulacion === 'PENDIENTE',
                            'bg-green-100 text-green-800 border border-green-200': post.estadoPostulacion === 'APROBADO',
                            'bg-red-100 text-red-800 border border-red-200': post.estadoPostulacion === 'RECHAZADO',
                            'bg-blue-100 text-blue-800 border border-blue-200': post.estadoPostulacion === 'EN_EVALUACION'
                          }">
                                    {{ post.estadoPostulacion | uppercase }}
                                </span>
                            </td>
                        </tr>
                        } @empty {
                        <tr>
                            <td colspan="4" class="py-12 text-center text-slate-500 bg-slate-50/50">
                                <lucide-icon name="users" size="40" class="mx-auto text-slate-300 mb-3"></lucide-icon>
                                Aún no hay postulantes registrados en esta convocatoria.
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        }
    </div>
</div>